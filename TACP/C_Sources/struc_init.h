#pragma once
#ifndef STRUC_INIT_H_INCLUDED
#define STRUC_INIT_H_INCLUDED
#include <stdint.h>

#endif

int all_struct_alloc(void);
int free_all_mem(void);
//                      STRUCTURE
//___________________________________________________________________
struct behavior_struct
{
	uint8_t beh_0;
	uint8_t beh_2;
	uint8_t item_group;
	uint8_t item_type;
	uint8_t unit_action;
	uint8_t agent_1;
	uint8_t val_6;
	uint8_t AI_control_none;
	int16_t x_pos;
	int16_t y_pos;
	int16_t z_pos;
	int16_t val_2;
	int16_t val_3;
	int16_t val_4;
	int16_t val_5;
};
struct expirean_struct
{
	uint16_t flag;
    int32_t index;
	uint32_t max_value;
	uint32_t entry[25];
	uint32_t section;
};
struct units_struct
{
	int16_t image;
	int16_t image_2;
	int16_t ID;
	char name_t1[26];
	int16_t side_t2;
	int16_t unit_type;
	int16_t AI_control_t2;
	int16_t squad;
	int16_t anim_offset;
	char field_2A;
	char field_2B;
	char field_2C;
	char field_2D;
	char field_2E;
	char rank;
	int16_t field_30;
	int16_t r_hend_weapon;
	int16_t l_hand_weapon;
	int16_t weapon_weight;
	int16_t total_encumberan;
	int16_t Days_service;
	int16_t Kills;
	int16_t missions;
	int16_t score;
	int16_t total_kill_score;
	char calc_score;
	char leg_typs;
	int16_t legs_armor;
	int16_t body_armor;
	int16_t l_arm_armor;
	int16_t r_arm_armor;
	int16_t head_armor;
	int16_t uncnown_armor;
	char leg_wound;
	char tors_wound;
	char l_hend_wound;
	char r_hend_wound;
	char head_wound;
	char rear_wound;
	char max_speed;
	char max_TU;
	char curr_speed;
	char field_5B;
	int16_t Reserve_TU_shot;
	int16_t Reserve_TU_kneel;
	char cloak_dist;
	char field_61;
	int16_t max_health_t1;
	int16_t current_health;
	char morale_1;
	char morale_2;
	char stamina_1;
	char stamina_2;
	char stamina_usage_count;
	char field_6B;
	char curent_reaction;
	char max_reaction;
	char auto_shot_counter;
	char field_6F;
	char strenght_1;
	char strenght_2;
	char curr_morale;
	char braverly;
	char psi_energy_1;
	char psi_energy_2;
	char field_76;
	char field_77;
	char field_78;
	char field_79;
	char field_7A;
	char field_7B;
	char unit_status;
	char agressive_mode_2;
	char fire_mode_2;
	char field_7F;
	int16_t stun_level;
	char fire_damage;
	char field_83;
	int16_t attack_unit_num;
	int16_t field_86;
	char psi_defece_curr;
	char psi_defece_1;
	char psi_defece_2;
	char field_8B;
	int16_t accuracy_t3;
	int16_t current_accuracy_t1;
	char field_90;
	char field_91;
	char field_92;
	char field_93;
	char field_94;
	char field_95;
	char gender_t2;
	char face_image;
	char field_98;
	char field_99;
	char photo_image;
	char field_9B;
	char field_9C;
	char field_9D;
	char field_9E;
	char field_9F;
	char field_A0;
	char field_A1;
	char equip_set_1;
	char equip_set_2;
	char equip_set_3;
	char equip_set_4;
	char equip_set_5;
	char field_A7;
	int16_t tracker_state;
	int16_t x_pos_t2;
	int16_t y_pos_t2;
	int16_t z_pos_t2;
	char field_B0;
	char field_B1;
	char field_B2;
	char field_B3;
	char field_B4;
	char field_B5;
	char field_B6;
	char field_B7;
	char field_B8;
	char field_B9;
	int16_t x_pos_3D_t2;
	int16_t y_pos_3D_t2;
	int16_t z_pos_3D_t2;
	int16_t x_size_t2;
	int16_t y_size_t2;
	int16_t z_size_t2;
	char field_C6;
	char field_C7;
	char field_C8;
	char field_C9;
	char field_CA;
	char field_CB;
	char field_CC;
	char field_CD;
	int16_t lof_height;
	int16_t size_x_1;
	int16_t x_pos_move_target;
	int16_t y_pos_move_target;
	int16_t z_pos_move_target;
	int16_t x_pos_1;
	int16_t y_pos_1;
	int16_t z_pos_1;
	char Object_height;
	char field_DF;
	char x_pos_2;
	char y_pos_2;
	char z_pos_2;
	char field_E3;
	char field_E4;
	char field_E5;
	char field_E6;
	char field_E7;
	char field_E8;
	char field_E9;
	char field_EA;
	char field_EB;
	char field_EC;
	char field_ED;
	char direct_2d;
	char item_size_y;
	char item_size_z;
	char field_F1;
	int16_t direct_3d;
	int16_t field_F4;
	int16_t field_F6;
	int16_t move_mode;
	int16_t field_FA;
	int16_t field_FC;
	char max_speed_2_mod;
	char field_FF;
	int16_t curr_TU;
	int16_t current_frame_speed_by_moving_mode;
	char field_104;
	char field_105;
	char field_106;
	char field_107;
	int16_t lof_offset;
	char x_pos_3;
	char y_pos_3;
	char z_pos_3;
	char field_10D;
	int16_t z_pos_6;
	int16_t turet_size_2;
	int16_t field_112;
	int16_t field_114;
	int16_t field_116;
	int16_t field_118;
	int16_t field_11A;
	int16_t field_11C;
	int16_t field_11E;
	int16_t field_120;
	int16_t field_122;
	int16_t field_124;
	int16_t field_126;
	int16_t field_128;
	int16_t field_12A;
	int16_t field_12C;
	int16_t field_12E;
	int16_t field_130;
	int16_t field_132;
	int16_t field_134;
	int16_t field_136;
	int16_t field_138;
	int16_t field_13A;
	int16_t field_13C;
	int16_t field_13E;
	int16_t field_140;
	int16_t field_142;
	int16_t field_144;
	int16_t field_146;
	int16_t field_148;
	int16_t field_14A;
	int16_t field_14C;
	int16_t field_14E;
	int16_t field_150;
	int16_t field_152;
	int16_t field_154;
	int16_t field_156;
	int16_t field_158;
	int16_t field_15A;
	int16_t field_15C;
	int16_t field_15E;
	int16_t field_160;
	int16_t field_162;
	int16_t field_164;
	int16_t field_166;
	int16_t field_168;
	int16_t field_16A;
	int16_t field_16C;
	int16_t field_16E;
	int16_t field_170;
	int16_t field_172;
	int16_t field_174;
	int16_t field_176;
	int16_t field_178;
	int16_t field_17A;
	int16_t field_17C;
	int16_t field_17E;
	int16_t field_180;
	int16_t field_182;
	int16_t field_184;
	int16_t field_186;
	int16_t field_188;
	int16_t field_18A;
	int16_t field_18C;
	int16_t field_18E;
	int16_t field_190;
	int16_t field_192;
	int16_t field_194;
	int16_t field_196;
	int16_t field_198;
	int16_t field_19A;
	int16_t field_19C;
	int16_t field_19E;
	int16_t field_1A0;
	int16_t field_1A2;
	int16_t field_1A4;
	int16_t field_1A6;
	int16_t field_1A8;
	int16_t field_1AA;
	int16_t field_1AC;
	int16_t field_1AE;
	int16_t field_1B0;
	int16_t field_1B2;
	int16_t field_1B4;
	int16_t field_1B6;
	int16_t field_1B8;
	int16_t field_1BA;
	int16_t field_1BC;
	int16_t field_1BE;
	int16_t field_1C0;
	int16_t field_1C2;
	int16_t field_1C4;
	int16_t field_1C6;
	int16_t field_1C8;
	int16_t field_1CA;
	int16_t field_1CC;
	int16_t field_1CE;
	int16_t field_1D0;
	int16_t field_1D2;
	char losarea_sec_num;
	char field_1D5;
	char losar_sec_num[10];
	char field_1E0;
	char field_1E1;
	char field_1E2;
	char field_1E3;
	char field_1E4;
	char field_1E5;
	char field_1E6;
	char field_1E7;
	char field_1E8;
	char field_1E9;
	char field_1EA;
	char field_1EB;
	char field_1EC;
	char field_1ED;
	char field_1EE;
	char field_1EF;
	char field_1F0;
	char field_1F1;
	char field_1F2;
	char field_1F3;
	char field_1F4;
	char field_1F5;
	char field_1F6;
	char field_1F7;
	char field_1F8;
	char field_1F9;
	char field_1FA;
	char field_1FB;
	char field_1FC;
	char field_1FD;
	char field_1FE;
	char field_1FF;
	char field_200;
	char field_201;
	char field_202;
	char field_203;
	char field_204;
	char field_205;
	char field_206;
	char field_207;
	char field_208;
	char field_209;
	char field_20A;
	char field_20B;
	char field_20C;
	char field_20D;
	char field_20E;
	char field_20F;
	char field_210;
	char field_211;
	char field_212;
	char field_213;
	int16_t x_pos_4;
	int16_t y_pos_4;
	int16_t z_pos_4;
	int16_t agent_in_aim;
	int16_t kneeling;
	int16_t movement_mode;
	int16_t agent_formation;
	int16_t agressive_mode;
	int16_t movement_graphic_mode;
	int16_t fire_mode;
	int16_t kneeling_graf_fire;
	int16_t stand_Kneel;
	int16_t kneeling_setting;
	char field_22E;
	char field_22F;
	char field_230;
	char field_231;
	char field_232;
	char field_233;
	char field_234;
	char field_235;
	char field_236;
	char field_237;
	char field_238;
	char field_239;
	char field_23A;
	char field_23B;
	char field_23C;
	char field_23D;
	char field_23E;
	char field_23F;
	char field_240;
	char field_241;
	char field_242;
	char field_243;
	char field_244;
	char field_245;
	char field_246;
	char field_247;
	char field_248;
	char field_249;
	char field_24A;
	char field_24B;
	char field_24C;
	char field_24D;
	char field_24E;
	char field_24F;
	char field_250;
	char field_251;
	char field_252;
	char field_253;
	int16_t sheild_point;
	char field_256;
	char field_257;
	char matrix_action_2_mode;
	char field_259;
	char field_25A;
	char field_25B;
	int16_t proj_owner_unit_num;
	char num_aiming_unit_array[28];
	char field_27A[6];
	char field_280[6];
	char number_of_units_hit;
	char damage_taken_counter;
	char unit_hit_struc;
	char num_aim_unit;
	char field_28A;
	char field_28B;
	char max_health_div_4;
	char field_28D;
	char matrix_action_6_mode;
	char field_28F;
	char unit_alied_num;
	char field_291;
	char field_292;
	char field_293;
	char field_294;
	char field_295;
	char field_296;
	char field_297;
	char field_298;
	char field_299;
	char field_29A;
	char field_29B;
	char field_29C;
	char field_29D;
	char field_29E;
	char field_29F;
	char field_2A0;
	char field_2A1;
	char field_2A2;
	char field_2A3;
	char field_2A4;
	char field_2A5;
	char field_2A6;
	char field_2A7;
	char field_2A8;
	char field_2A9;
	char field_2AA;
	char field_2AB;
	char field_2AC;
	char field_2AD;
	char field_2AE;
	char field_2AF;
	int16_t obj_r_hand;
	int16_t field_2B2;
	int16_t obj_l_hand;
	int16_t field_2B6;
	char inventory;
	char field_2B9;
	char field_2BA;
	char damage_modif_group;
	char movement_type_t3;
	char fly_mod;
	char field_2BE;
	char field_2BF;
	char losection_num;
	char field_2C1;
	int time_array[28];
	int16_t losection_array[28];
	char agent_move_type[28];
	int16_t agent_move_mode[28];
	char r_hand_ammo[28];
	char l_hand_ammo[28];
	char lose_health_arr[28];
	char squad_unk;
	char field_413;
	int8_t field_414;
	char field_415;
	char field_416;
	char field_417;
	int16_t field_418;
	int16_t matrix_ai_control[2];
	char field_41E;
	char brainsuck_flag;
	char field_420;
	char field_421;
	char field_422;
	char field_423;
	char field_424;
	char field_425;
	char field_426;
	char field_427;
	char field_428;
	char random_matrix_flag;
	char field_42A;
	char field_42B;
	char field_42C;
	char field_42D;
	char time_unc;
	char field_42F;
	char field_430;
	char field_431;
	int16_t exp_sec_num[2];
	int16_t action_30_array[20];
	int16_t x_pos_unc;
	int16_t y_pos_unc;
	int16_t z_pos_unc;
	char aggr_set_ctrl_unit;
	char movement_graphic_mode_old;
	char fire_mod_old;
	char field_467;
	char field_468;
	char field_469;
	char field_46A;
	char field_46B;
	char matrix_action_27_mode;
	char field_46D;
	char field_46E;
	char field_46F;
	char field_470;
	char field_471;
	char field_472;
	char field_473;
	char field_474;
	char field_475;
	char field_476;
	char matrix_action_28_mode;
	char field_478;
	char unit_weapon_mode;
	char anim_speed;
	char field_47B;
	char field_47C;
	char field_47D;
	char field_47E;
	char field_47F;
	char field_480;
	char field_481;
	char field_482;
	char field_483;
	char field_484;
	char field_485;
	char field_486;
	char field_487;
	int16_t speed_3;
	int16_t health_3;
	int16_t stamina_3;
	int16_t reaction_3;
	int16_t strenght_3;
	int16_t braverly_3;
	int16_t accuracy_3;
	int16_t psi_energy_3;
	int16_t psi_attack_3;
};
struct brain_struct
{
	uint32_t index;
	uint32_t row_count;
	uint32_t section;
	struct float_sections
	{
		float shot_section[25][12];
		float total;
		float long_section[25][25];
	} fsection[6];
};
struct losarea_struct
{
	int8_t field_0;
	int8_t field_1;
	int16_t x_coord1;
	int16_t y_coord1;
	int16_t z_coord1;
	int16_t x_coord2;
	int16_t y_coord2;
	int16_t z_coord2;
	int16_t sections_x;
	int16_t sections_y;
	int16_t sections_z;
	int8_t field_14;
	int8_t field_15;
	int8_t field_16;
	int8_t field_17;
	int8_t field_18;
	int8_t field_19;
	int8_t field_1A;
	int8_t field_1B;
	int8_t field_1C;
	int8_t field_1D;
	int8_t field_1E;
	int8_t field_1F;
	int8_t field_20;
	int8_t field_21;
	int8_t field_22;
	int8_t field_23;
	int8_t field_24;
	int8_t field_25;
	int8_t field_26;
	int8_t field_27;
	int8_t field_28;
	int8_t field_29;
	int8_t field_2A;
	int8_t field_2B;
	int8_t field_2C;
	int8_t field_2D;
	int8_t field_2E;
	int8_t field_2F;
	int8_t field_30;
	int8_t field_31;
	int8_t field_32;
	int8_t field_33;
	int8_t field_34;
	int8_t field_35;
	int8_t field_36;
	int8_t field_37;
	int8_t field_38;
	int8_t field_39;
	int8_t field_3A;
	int8_t field_3B;
	int8_t field_3C;
	int8_t field_3D;
	int8_t field_3E;
	int8_t field_3F;
	int8_t field_40;
	int8_t field_41;
	int8_t field_42;
	int8_t field_43;
	int8_t field_44;
	int8_t field_45;
	int8_t field_46;
	int8_t field_47;
	int8_t field_48;
	int8_t field_49;
	int8_t field_4A;
	int8_t field_4B;
	int8_t field_4C;
	int8_t field_4D;
	int8_t field_4E;
	int8_t field_4F;
	int8_t field_50;
	int8_t field_51;
	int8_t field_52;
	int8_t field_53;
	int8_t field_54;
	int8_t field_55;
	int8_t field_56;
	int8_t field_57;
	int8_t field_58;
	int8_t field_59;
	int8_t field_5A;
	int8_t field_5B;
	int8_t field_5C;
	int8_t field_5D;
	int8_t field_5E;
	int8_t field_5F;
	int8_t field_60;
	int8_t field_61;
	int8_t org_offset[28];
	int8_t field_7E;
	int8_t field_7F;
	int8_t field_80;
	int8_t field_81;
	int8_t AI_Patrol_Priority;
	int8_t AI_Target_Priority;
	int8_t Spawn_Type;
	int8_t Spawn_Priority;
	int8_t Can_Deploy_Large_Units;
	int8_t Can_Deploy_Non_Flying_Units;
};
//===================================================================

//                      POINTERS
//___________________________________________________________________
struct units_struct* units_t;
struct expirean_struct* expirean_t;
struct brain_struct* brain_t;
struct behavior_struct* behavior_t;
struct losarea_struct* losarea_t;

//===========================RND=======================================
//uint8_t random_dat_ofs = 0; //смещение для файла случайных чисел
//uint8_t rnd_dt[10013] = {0};

//___________________________________________________________________
//                      EXTERN
//___________________________________________________________________
extern uint8_t* struc_behavior;
extern uint8_t* agents_t;
extern uint8_t* losarea_dat;
extern uint8_t* expirean_temp_2;
extern uint8_t* BRAIN_DAT;

extern int16_t tick;
extern int16_t second;
extern int16_t minute;
extern int16_t hours;
extern int8_t train_flag;
extern uint32_t EXPERIEN_proccesing_flag;
extern int8_t update_matrix_flag;
extern uint32_t sc_bld_owner_sc;
extern WEAPEXP_write_flag;
extern sc_mission_type;
extern uint32_t agent_count;
extern uint32_t dword_2A1578;
extern int32_t unit_action_flag;
extern int16_t AI_control_FULL;
extern int32_t brain_index_count;
extern int8_t game_type_0;
extern int32_t dword_27A0F0;


extern int8_t WEAPEXP_1_1[17160];
extern int8_t WEAPEXP_2_t[17160];
extern uint32_t squad_array[60];
extern uint32_t side_array[60];
extern uint16_t alien_health_damage_array[100];
extern uint16_t agent_health_damage_array[100];

extern uint16_t choosen_agent;
extern uint16_t agent_choose_interf[6];
// 
//
// 
////=============const init  functions==================== 
struct units_init
{
	int8_t score;
	int8_t field_1;
	int8_t speed;
	int8_t max_speed_increese;
	int16_t health;
	int16_t max_health_increase;
	int8_t unk1;
	int8_t unk2;
	int8_t stamina;
	int8_t max_stamina_increase;
	int8_t reaction;
	int8_t max_reaction_increase;
	int8_t strenght;
	int8_t max_strenght_increase;
	int8_t braverly;
	int8_t max_braverly_increase;
	int8_t psi_energy;
	int8_t max_psi_energy_increase;
	int8_t psi_attack;
	int8_t max_psi_attack_incriase;
	int8_t psi_defece;
	int8_t max_psi_defece_incriace;
	int8_t field_24;
	int8_t field_25;
	int8_t accuracy_t1;
	int8_t max_accuracy_incriace;
	int8_t field_28;
	int8_t field_30;
	int8_t field_31;
	int8_t field_32;
	int8_t bio_skill;
	int8_t max_bio_skill_increace;
	int8_t qua_skill;
	int8_t max_qua_skill_increace;
	int8_t eng_skill;
	int8_t max_eng_skill_increace;
	int8_t field_38;
	int8_t field_39;
	int8_t field_40;
	int8_t field_41;
	int8_t field_42;
	int8_t field_43;
	int8_t field_44;
	int8_t field_45;
	int8_t field_46;
	int8_t field_47;
	int8_t field_48;
	int8_t field_49;
	int8_t field_50;
	int8_t field_51;
	int8_t field_52;
	int8_t field_53;
	int8_t field_54;
	int8_t field_55;
	int8_t field_56;
	int8_t field_57;
	int8_t field_58;
	int8_t field_59;
	int16_t size_x;
	int16_t size_y;
	int16_t field_64;
	int8_t movement_type;
	int8_t field_67;
	int8_t inventory;
	int8_t leg_type_t1;
	int16_t leg_armor;
	int16_t body_armor;
	int16_t r_arm_armor;
	int16_t l_arm_armor;
	int16_t head_armor;
	int16_t unk_armor;
	int8_t unknown_71;
	int8_t equipment_set_1;
	int8_t equipment_set_2;
	int8_t equipment_set_3;
	int8_t equipment_set_4;
	int8_t equipment_set_5;
	int16_t damage_modifier_group;
	int16_t unknown_78;
	int16_t empty_slot_flag;
	int8_t assigment_type;
	int8_t field_5F;
	int16_t image_position_1;
	int16_t image_position_2;
	int16_t image_position_3;
	int16_t image_position_4;
	int16_t image;
};
// 
// 
// 
//=============common functions====================
struct behavior_struct* find_in_behavior_struc(void);
int16_t set_2_expirean_temp_section(int16_t expirean_row_num, int16_t section);
int16_t side_array_set(int16_t side, int16_t squad);
int16_t calc_unit_to_unit_direction_2d(int16_t x1, int16_t y1, int16_t x2, int16_t y2);


//typedef struct behavior_struc behavior;
//typedef behavior* bhvr;
//struct behavior_struc *bhvr_ptr;
//-----------------------------------------
//extern uint16_t* expirean_temp_2;
//struct behavior_struc* expirean_ptr;
//-----------------------------------------

